<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>ZedBangers üé∂</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!-- Legendary Ultra Realistic Styling -->
  <style>
    body {
      margin: 0;
      font-family: 'Segoe UI', sans-serif;
      background: linear-gradient(135deg, #0f0f0f, #1a1a1a);
      color: #fff;
    }
    header {
      background: #ff004c;
      padding: 20px;
      text-align: center;
      font-size: 2em;
      font-weight: bold;
      letter-spacing: 2px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.6);
    }
    .container {
      max-width: 900px;
      margin: 30px auto;
      padding: 20px;
      background: #222;
      border-radius: 12px;
      box-shadow: 0 6px 20px rgba(0,0,0,0.8);
    }
    input, textarea {
      width: 100%;
      padding: 12px;
      margin: 10px 0;
      border: none;
      border-radius: 8px;
      font-size: 1em;
    }
    input[type="file"] {
      background: #333;
      color: #fff;
    }
    button {
      background: #ff004c;
      color: #fff;
      padding: 12px 20px;
      border: none;
      border-radius: 8px;
      font-size: 1em;
      cursor: pointer;
      transition: 0.3s;
    }
    button:hover {
      background: #ff3366;
    }
    .song {
      background: #111;
      margin: 15px 0;
      padding: 15px;
      border-radius: 10px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.7);
    }
    .song h3 {
      margin: 0;
      color: #ff004c;
    }
    .song audio {
      width: 100%;
      margin-top: 10px;
    }
    .comments {
      margin-top: 10px;
      padding-left: 15px;
      border-left: 2px solid #ff004c;
    }
  </style>
</head>
<body>
  <header>ZedBangers üé∂</header>
  <div class="container">
    <h2>Upload Your Song</h2>
    <input type="text" id="artist" placeholder="Your Name">
    <input type="text" id="title" placeholder="Song Title">
    <textarea id="description" placeholder="Describe your song..."></textarea>
    <input type="file" id="fileInput" accept="audio/*">
    <button onclick="uploadSong()">Send</button>
  </div>

  <div class="container">
    <h2>üî• Latest Songs üî•</h2>
    <div id="songsList"></div>
  </div>

  <!-- Firebase SDK -->
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-storage.js"></script>

  <script>
    // Your Firebase config
    var firebaseConfig = {
      databaseURL: "https://zedbangers-86dad-default-rtdb.firebaseio.com/"
    };
    firebase.initializeApp(firebaseConfig);

    const db = firebase.database();
    const storage = firebase.storage();

    function uploadSong() {
      const artist = document.getElementById('artist').value;
      const title = document.getElementById('title').value;
      const description = document.getElementById('description').value;
      const file = document.getElementById('fileInput').files[0];

      if (!artist || !title || !file) {
        alert("Please fill in all fields and select a file.");
        return;
      }

      // Upload file to Firebase Storage
      const storageRef = storage.ref('songs/' + Date.now() + '_' + file.name);
      storageRef.put(file).then(snapshot => {
        snapshot.ref.getDownloadURL().then(url => {
          const songId = db.ref('songs').push().key;
          db.ref('songs/' + songId).set({
            artist: artist,
            title: title,
            description: description,
            url: url,
            likes: 0
          });
          alert("Song uploaded successfully!");
        });
      });
    }

    // Display songs
    db.ref('songs').on('value', snapshot => {
      const songsList = document.getElementById('songsList');
      songsList.innerHTML = '';
      snapshot.forEach(songSnap => {
        const song = songSnap.val();
        const div = document.createElement('div');
        div.className = 'song';
        div.innerHTML = `
          <h3>${song.title} - ${song.artist}</h3>
          <p>${song.description}</p>
          <audio controls src="${song.url}"></audio>
          <button onclick="likeSong('${songSnap.key}', ${song.likes})">‚ù§Ô∏è ${song.likes}</button>
          <div class="comments">
            <input type="text" id="comment_${songSnap.key}" placeholder="Add a comment...">
            <button onclick="addComment('${songSnap.key}')">üí¨ Comment</button>
          </div>
          <div id="comments_${songSnap.key}"></div>
        `;
        songsList.appendChild(div);

        // Load comments
        db.ref('songs/' + songSnap.key + '/comments').on('value', commentSnap => {
          const commentsDiv = document.getElementById('comments_' + songSnap.key);
          commentsDiv.innerHTML = '';
          commentSnap.forEach(c => {
            const comment = c.val();
            const p = document.createElement('p');
            p.textContent = "üí¨ " + comment.text;
            commentsDiv.appendChild(p);
          });
        });
      });
    });

    function likeSong(songId, currentLikes) {
      db.ref('songs/' + songId + '/likes').set(currentLikes + 1);
    }

    function addComment(songId) {
      const commentInput = document.getElementById('comment_' + songId);
      const text = commentInput.value;
      if (text) {
        db.ref('songs/' + songId + '/comments').push({ text: text });
        commentInput.value = '';
      }
    }
  </script>
</body>
  </html>
